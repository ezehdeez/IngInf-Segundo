a<-2
a*b
a
b
3->b
a*b
c=5                 # constante
c = 7
a[4]
a<-c(1,5,3,2,9,-1)              # vector. M: c(); los elementos de un vector son todos del mismo tipo
b<-c("d","g","m","z","13")      # vector
c <- 4:15                       # vector usando el iterador :, que ya devuelve un vector
a[4]
b[1]
b
b <- rnorm(100)                        # generación de valores de una distribución normal
b <- runif(100)                        # generación de valores de una distribución uniforme, ir aumentando el número de valores
hist(b)
a <- seq( from=5, to=23, length=100 )
b <- runif(100)
a
b
c <- cbind(a,b)
c
e <- cbind(c,dt)                       # combina columnas en una matriz
e
colnames(e) <- c("nom1","nom2","nom3","nom4")  # poner nombre a columnas de una matriz
letters
f<-c(letters,letters,letters)
f
f[79:100]<-NA                                     # añadimos NA hasta una longitud de 100
f
h <- data.frame(e,f)
View(h)
dim(h)                  # las dimensiones del data frame
str(h)                  # la estructura del data fame
gc()
A<-matrix(1:12,nrow=3)
A
log(A)
A[2,3]
A[2,]
A[,3]
C<-A[c(1,3),2:3]   #Seleccionames los elementos de A que están en las filas 1 y 3 y columnas de la 2 a la 3
C
remove(list=ls())
A<-matrix(c(30,18,42,66,45,96,78,42,114),nrow=3, byrow=TRUE)
A
det(A)                            # determinante
eigen(A)                          # diagonaliza la matriz
D<-solve(A)                       # matriz inversa
D
A%*%D
remove(list=ls())
# ejemplo de bucle
h <- seq(from=1, to=12)
s <- c()
for(i in 3:15)
{ s[i] <- h[i] * 10 }
s
remove(list=ls())
# ejemplo simple de gráfica
curve(3*x+10,-10,10)                  #M: podemos exportar el gráfico creado en varios formatos
curve(x^2-3*x+10,-10,10, add=TRUE)
# Construye un vector x con 25 valores aleatorio, calcula su mínimo, su máximo y ordena sus valores de menor a mayor
x <- runif(5, min = 0, max = 10)
x
min(x)
max(x)
sort(x)
# qué es order(x). M: devuelve una permutación que ordena los elementos en orden creciente (por defecto) o decreceitne
order(x)
library(readxl)
HIPERTEN200 <- read_excel("uni/2º/Estadística/Lab02/HIPERTEN200.xlsx")
View(HIPERTEN200)
# Realizamos una copia, para trabajar con el dataframe HIPER200
HIPER200<-HIPERTEN200
View(HIPER200)
# Comprobamos ahora que la importación ha resultado ser un data frame de valores, tanto para cualitativos como cuantitativos
str(HIPER200)
attach(HIPER200)   #simplificamos el acceso a las variables del data.frame, evitando el $
HIPER200$sexo<-factor(sexo,levels=c(1,2),labels=c("masculino","femenino"),ordered=FALSE)
HIPER200$profesio<-factor(profesio,labels=c("campo","pescador","construccion","oficina","liberal","hogar","estudiante","otras"),ordered=FALSE)
HIPER200$sit_labo<-factor(sit_labo,labels=c("cuenta ajena","autnomo","parado","jubilado","otras"),ordered=FALSE)
HIPER200$cultura<-factor(cultura,labels=c("sin estudios","estudios primarios","estudios secundarios","estudios superiores"),ordered=TRUE)
HIPER200$t_tabaco<-factor(t_tabaco, labels=c("no fumador","< 5 años","> 5 años"),ordered=TRUE)
HIPER200$cl_tabac<-factor(cl_tabac,labels=c("no fumador","poco","moderado","muy fumador"),ordered=TRUE)
HIPER200$cafe<-factor(cafe,labels=c("no toma","poco","moderado","mucho"),ordered=TRUE)
HIPER200$act_fisi<-factor(act_fisi,labels=c("escasa","moderada","intensa"),ordered=TRUE)
HIPER200$sal<-factor(sal,labels=c("poca","normal","mucha"),ordered=TRUE)
HIPER200$es_hiper<-factor(es_hiper,labels=c("si","no","no lo sabe"))
HIPER200$cl_peso<-factor(cl_peso,labels=c("normal","obesidad discreta", "obesidad moderada", "obesidad grave","obesidad morbida"), ordered=TRUE)
HIPER200$conc_hta<-factor(conc_hta,labels=c("normotenso","bordeline","hipertenso"),ordered=TRUE)
HIPER200$edad<-as.numeric(HIPER200$edad)
HIPER200$peso<-as.numeric(HIPER200$peso)
HIPER200$talla<-as.numeric(HIPER200$talla)
HIPER200$sist_ini<-as.numeric(HIPER200$sist_ini)
HIPER200$dias_ini<-as.numeric(HIPER200$dias_ini)
HIPER200$sist_fin<-as.numeric(HIPER200$sist_fin)
HIPER200$dias_fin<-as.numeric(HIPER200$dias_fin)
attach(HIPER200)
str(HIPER200)
getwd()                             # muestra el directorio de trabajo actual
setwd("D:/MACU/Asignas/EIO/Estadistica-ETSII/25-26/Lab02")         # establece el directorio de trabajo actual
save(HIPER200,file="HIPER200.RData")
getwd()                             # muestra el directorio de trabajo actual
setwd("/Users/ezehdezpl/uni/2º/Estadística/Lab02")         # establece el directorio de trabajo actual
save(HIPER200,file="HIPER200.RData")
remove(list=ls())                # vacia el contenido del workspace
load("HIPER200.RData")
#====================================================
# PEQUEÑAS COSAS QUE PODEMOS CAMBIAR EN UN DATA FRAME
#====================================================
# Cambiar el nombre de una variable
names(HIPER200)[names(HIPER200)=="cultura"]<-c("estudios") #por su nombre
names(HIPER200)[names(HIPER200)=="sist_ini"]<-c("TAsist0") #por su nombre
names(HIPER200)[names(HIPER200)=="dias_ini"]<-c("TAdias0") #por su nombre
names(HIPER200)[names(HIPER200)=="sist_fin"]<-c("TAsist1") #por su nombre
names(HIPER200)[names(HIPER200)=="dias_fin"]<-c("TAdias1") #por su nombre
names(HIPER200)[2]<-"genero"                 #por su posición en el fichero
# Cambiar las etiquetas de los niveles de un factor
library(plyr)
attach(HIPER200)
HIPER200$genero1<-revalue(genero,c("masculino"="M","femenino"="F"))
# Recodificar las etiquetas de los niveles de un factor
library(DescTools)
HIPER200$cl_tabac1<-Recode(HIPER200$cl_tabac,
"no fumador" = c("no fumador"),
"fumador" = c("poco","moderado","muy fumador"))
# Crear un factor desde una variable numérica
HIPER200$edad1<-cut(HIPER200$edad, breaks=c(15,30,60,90), labels=c("joven", "maduro", "jubilado"))
# Crea una variable con el número secuencial de cada caso
HIPER200$id<-seq(dim(HIPER200)[1])
# Reordenacion de columnas en el date frame
HIPER200<-HIPER200[c(23,1,12,13,15:18,2:10,14,11,19:22)]   #tener cuidado
# Seleccionar subconjuntos de datos y de variables
mydata02<-subset(HIPER200,select=c(-genero1,-cl_tabac1,-edad1))  #sin las variable derivadas que hemos creado
mydata03<-subset(HIPER200, genero=="femenino")           #todas las variable pero solo para femenino
mydata04<-subset(HIPER200, edad>=30 & genero=="masculino" & t_tabaco=="no fumador")
# Reordenacion FINAL de columnas en el date frame
HIPER200<-HIPER200[c(1:12,14,13,15:20)]   #estructura definitiva del fichero HIPER200
save(HIPER200,file="HIPER200.RData")
HIPER200$IMC <- peso/(talla/100)^2
View(HIPER200)
HIPER200$IMC_nivel <- cut(IMC, breaks=c(0,18.50,25, 30, 100), labels = c("Bajo peso", "Normal", "Sobrepeso", "Obesidad"))
#Para eliminar una variable o factor (varX) del data frame df: df$varX <- NULL
HIPER200$IMC_nivel <- NULL
HIPER200$IMC_nivel <- cut(IMC, breaks=c(0,18.50,25, 30, 100), labels = c("Bajo peso", "Normal", "Sobrepeso", "Obesidad"))
HIPER200$IMC <- peso/(talla/100)^2
HIPER200$IMC_nivel <- cut(IMC, breaks=c(0,18.50,25, 30, 100), labels = c("Bajo peso", "Normal", "Sobrepeso", "Obesidad"))
HIPER200$IMC_nivel <- cut(HIPER200$IMC, breaks=c(0,18.50,25, 30, 100), labels = c("Bajo peso", "Normal", "Sobrepeso", "Obesidad"))
#Para eliminar una variable o factor (varX) del data frame df: df$varX <- NULL
HIPER200$IMC_nivel <- NULL
save(HIPER200,file="HIPER200.RData")
