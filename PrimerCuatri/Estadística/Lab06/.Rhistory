a<-2
a*b
a
b
3->b
a*b
c=5                 # constante
c = 7
a[4]
a<-c(1,5,3,2,9,-1)              # vector. M: c(); los elementos de un vector son todos del mismo tipo
b<-c("d","g","m","z","13")      # vector
c <- 4:15                       # vector usando el iterador :, que ya devuelve un vector
a[4]
b[1]
b
b <- rnorm(100)                        # generación de valores de una distribución normal
b <- runif(100)                        # generación de valores de una distribución uniforme, ir aumentando el número de valores
hist(b)
a <- seq( from=5, to=23, length=100 )
b <- runif(100)
a
b
c <- cbind(a,b)
c
e <- cbind(c,dt)                       # combina columnas en una matriz
e
colnames(e) <- c("nom1","nom2","nom3","nom4")  # poner nombre a columnas de una matriz
letters
f<-c(letters,letters,letters)
f
f[79:100]<-NA                                     # añadimos NA hasta una longitud de 100
f
h <- data.frame(e,f)
View(h)
dim(h)                  # las dimensiones del data frame
str(h)                  # la estructura del data fame
gc()
A<-matrix(1:12,nrow=3)
A
log(A)
A[2,3]
A[2,]
A[,3]
C<-A[c(1,3),2:3]   #Seleccionames los elementos de A que están en las filas 1 y 3 y columnas de la 2 a la 3
C
remove(list=ls())
A<-matrix(c(30,18,42,66,45,96,78,42,114),nrow=3, byrow=TRUE)
A
det(A)                            # determinante
eigen(A)                          # diagonaliza la matriz
D<-solve(A)                       # matriz inversa
D
A%*%D
remove(list=ls())
# ejemplo de bucle
h <- seq(from=1, to=12)
s <- c()
for(i in 3:15)
{ s[i] <- h[i] * 10 }
s
remove(list=ls())
# ejemplo simple de gráfica
curve(3*x+10,-10,10)                  #M: podemos exportar el gráfico creado en varios formatos
curve(x^2-3*x+10,-10,10, add=TRUE)
# Construye un vector x con 25 valores aleatorio, calcula su mínimo, su máximo y ordena sus valores de menor a mayor
x <- runif(5, min = 0, max = 10)
x
min(x)
max(x)
sort(x)
# qué es order(x). M: devuelve una permutación que ordena los elementos en orden creciente (por defecto) o decreceitne
order(x)
#Establecimiento del directorio de trabajo por defecto
setwd("/Users/ezehdezpl/uni/2º/Estadística/Lab06")
load("HIPER200.RData")
attach(HIPER200)
# REPRESENTACI?N GR?FICA DE VARIABLES CUANTITATIVAS
plot(peso,talla)  #diagrama de dispersi?n
plot(peso,talla, pch=20, col="red",main="diagrama de dispersi?n")
plot(TAdias0,TAsist0, pch=20, col="red", xlab="TA Diast?lica inicial (mmHg)", ylab="TA Sist?lica inicial (mmHg)",main="diagrama de dispersi?n")
plot(edad,TAsist0, pch=20, col="red", xlab="Edad", ylab="TA Sist?lica inicial (mmHg)",main="diagrama de dispersi?n")
plot(peso,talla, pch=20, col="red",main="diagrama de dispersi?n")
plot(TAdias0,TAsist0, pch=20, col="red", xlab="TA Diast?lica inicial (mmHg)", ylab="TA Sist?lica inicial (mmHg)",main="diagrama de dispersi?n")
plot(edad,TAsist0, pch=20, col="red", xlab="Edad", ylab="TA Sist?lica inicial (mmHg)",main="diagrama de dispersi?n")
# GR?FICOS MEJORADOS, PERO OPCIONALES
library(lattice)
xyplot(TAsist0~TAdias0, type=c("p", "r"))
xyplot(peso~talla, type=c("p", "r"))
library(ggplot2)
ggplot(HIPER200, aes(x=TAdias0, y=TAsist0, shape=genero, colour=genero)) +   geom_point(size=3,shape=20) +   scale_shape_manual(values=c(1,2)) + scale_colour_brewer(palette="Set1")+ theme_bw()
ggplot(HIPER200, aes(x=TAdias0, y=TAsist0, shape=genero)) +   geom_point() + stat_smooth(method=lm, level=0.95) + theme_bw()
ggplot(HIPER200, aes(x=peso, y=talla, shape=genero, colour=genero)) +   geom_point(size=3,shape=20) +   scale_shape_manual(values=c(1,2)) + scale_colour_brewer(palette="Set1")+ theme_bw()
ggplot(HIPER200, aes(x=peso, y=talla, shape=genero)) +   geom_point() + stat_smooth(method=lm, level=0.95) + theme_bw()
ggplot(HIPER200, aes(x=TAdias0, y=TAsist0,  colour=edad)) +   geom_point() + theme_bw()
# Regresi?n lineal: recta, par?metros, gr?fico de dispersi?n con recta
reg<-lm(TAsist0~TAdias0)  # establecimiento del modelo PRIMERO Y, LUEGO X
print(reg)
summary(reg)
plot( TAdias0, TAsist0, pch=20, col="red",main="diagrama de dispersi?n")
abline(reg)
cov(TAsist0, TAdias0)   # covarianza
cor(TAsist0, TAdias0)   # correlacion de Pearson
reg<-lm(TAdias1~TAdias0)  # establecimiento del modelo
print(reg)
summary(reg)
plot( TAdias0, TAdias1, pch=20, col="red",main="diagrama de dispersi?n")
abline(reg)
cov(TAdias1, TAdias0)   # covarianza
cor(TAdias1, TAdias0)   # correlacion de Pearson
reg<-lm(TAsist0~TAdias0,data=HIPER200,subset=genero=="masculino")  # establecimiento del modelo para una subpoblaci?n
reg<-lm(TAsist0~TAdias0,data=HIPER200,subset=edad>50)              # establecimiento del modelo para una subpoblaci?n
#===============================================================
# datos del ejercicio 1, para la aplicaci?n de diversos modelos
#===============================================================
x<-c(2,3,4,4,5,5,6,7,7,9,9,10,11,11,12)
y<-c(11,12,10,13,11,9,10,7,12,8,7,3,6,5,5)
plot(x,y, pch=20, col="red", xlim=c(0,16),ylim=c(0,12), xlab="N? de n?cleos", ylab="Tiempo de respuesta",main="diagrama de dispersi?n")
cov(x,y)  # covarianza entre X e Y
cor(x,y)  # correlaci?n entre X e Y de Pearson
# 1-modelo con recta
reg1<-lm(y~x)
print(reg1$coef)
summary(reg1)
abline(reg1)
xdat1<-cbind(x,y,reg1$fitted,reg1$residuals) # construimos una matriz con los datos, predichos y residuales
colnames(xdat1) <- c("n?cleos","tiempo","pred1","res1")
print(xdat1)
#pronosticos de y para ciertos valores de x=13,14 y 15
predict (reg1 ,data.frame(x=c(13,14,15)),interval ="prediction")->p_
x1<-c(13,14,15) ; y1<-c(3.78,2.98,2.17)
points(x1,y1,col="blue",pch=20)
x_<-c(2,3,4,4,5,5,6,7,9,9,11,11,12)
y_<-c(11,12,10,13,11,9,10,7,8,7,6,5,5)
plot(x_,y_, pch=20, col="red", xlim=c(0,16),ylim=c(0,12), xlab="N? de n?cleos", ylab="Tiempo de respuesta",main="diagrama de dispersi?n")
cov(x_,y_)  # covarianza entre X e Y
cor(x_,y_)  # correlación entre X e Y
# 1-modelo con recta
reg_<-lm(y_~x_)
print(reg_$coef)
summary(reg_)
abline(reg_)
xdat_<-cbind(x_,y_,reg_$fitted,reg_$residuals) # construimos una matriz con los datos, predichos y residuales
colnames(xdat_) <- c("n?cleos","tiempo","pred_","res_")
print(xdat_)
#pron?sticos de y para ciertos valores de x=13,14 y 15
predict (reg_ ,data.frame(x_=c(13,14,15)),interval ="prediction")
x1<-c(13,14,15) ; y1<-c(4.21,3.48,2.75)
points(x1,y1,col="blue",pch=20)
# 2-modelo parab?lico
reg2<-lm(y~x+I(x^2))
summary(reg2)
print(reg2$coef)
xdat2<-cbind(x,y,reg2$fitted,reg2$residuals)
colnames(xdat2) <- c("n?cleos","tiempo","pred2","res2")
print(xdat2)
curve(reg2$coef[1]+reg2$coef[2]*x+reg2$coef[3]*x^2, 1,15,add=TRUE, col="blue")
#pronosticos de y en ciertos valores de x=13, 14 y 15
predict (reg2 ,data.frame(x=c(13,14,15)),interval ="prediction")
# 3-modelo polin?mico de grado 3
reg3<-lm(y~x+I(x^2)+I(x^3))
